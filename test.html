<html>
<head>
	<title> 计算鼠标在计算机上停留的时间 </title>
	<meta charset=utf-8>
</head>
<style>
 .mod-spm {
 	width: 100px;
 	height: 100px;
 	background-color: #5D6;
 	margin-bottom: 15px;
 	font-size: 24px;
 	z-index: 3;
 }
</style>
<body>
<div class='mod-spm' data-spmid='123'>
       <div class='child_a'></div>
       <div class='child_b'></div>
       <div class='child_c'></div>
       <div class='child_d'></div>
    </div>
    <div class='mod-spm' data-spmid='456'>
       <div class='child_a'></div>
       <div class='child_b'></div>
       <div class='child_c'></div>
       <div class='child_d'></div>
    </div>
    <div class='mod-spm' data-spmid='789'>
       <div class='child_a'></div>
       <div class='child_b'></div>
       <div class='child_c'></div>
       <div class='child_d'></div>
    </div>

<script type="text/javascript">
	function calcTime (){
		var elems = document.getElementsByTagName("div");
		for(var i = 0 ,len = elems.length; i < len ;i++ ){
			if(elems[i].hasAttribute("data-spmid")){
				elems[i].setAttribute("data-time",0);
				elems[i].onmouseover = function (){
					var id = this.getAttribute("data-spmid");
					if(id){
						var startTime = new Date().valueOf()/1000;
						this.setAttribute("st" ,startTime); 
					}
				}

				elems[i].onmouseout = function (){
					var id = this.getAttribute("data-spmid");
					if(id){
						var endTime = new Date().valueOf() /1000,
						 	time = endTime - this.getAttribute("st")  + parseInt(this.getAttribute("data-time"));
						this.setAttribute("data-time",time);
						this.innerHTML = time;
					}
				}
			}
		}
	}

	document.body.onload = function (){
		calcTime();
	}

</script>
</body>
</html>